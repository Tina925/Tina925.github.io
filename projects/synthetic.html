<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="title" content="Synthetic Datasets | Mengting Xu | Professional Portfolio">
    <meta name="description" content="">
    <meta name="image" content="https://github.com/Tina925.png">
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="Mengting Xu | Professional Portfolio">
    <meta property="og:url" content="https://Tina925.github.io/projects/synthetic.html">
    <meta property="og:title" content="Synthetic Datasets | Mengting Xu | Professional Portfolio">
    <meta property="og:description" content="">
    <meta property="og:image" content="https://github.com/Tina925.png">
    <link rel="shortcut icon" href="/favicon.ico">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">
    <link rel="stylesheet" href="/css/techfolio-theme/default.css">
    <link rel="stylesheet" type="text/css" href="/css/rouge/github.css">
    <!-- Load MathJax if 'mathjax: true' is found in your _config.yml. -->
    
    <script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-MML-AM_CHTML">
    </script>
    

    <title>Synthetic Datasets | Mengting Xu | Professional Portfolio</title>
  </head>
  <body>
  <header class="navbar navbar-expand navbar-light bg-light bg-gradient border-bottom">
  <div class="container-fluid">
    <a class="navbar-brand" href="/">Mengting Xu</a>
    <div class="ms-auto">
      <ul class="navbar-nav mb-2 mb-lg-0">
        <a class="nav-link" href="/#projects">Projects</a>
        <a class="nav-link" href="/#essays">Essays</a>
        <a class="nav-link" href="/resume.html">Resume</a>
      </ul>
    </div>
  </div>
</header>

<div class="container py-4">
  <h1 class="display-4">Synthetic Datasets</h1>
 <div class="text-center p-4">
  <img class="img-thumbnail" src="../img/robomaster/rob.png" />
</div>

<p>Our goal for this project is to augmented Robomaster’s datasets in order to get a larger datasets for traning, and also generate  synthetic datasets for different angle of the robots by changing camera angles in Maya application. This is a year long project</p>

<p>Our team expand the existing datasets in order to improve the accuracy and train the datasets in different methods in order to achieve it. The method we used including scaling, rotation, position, and brightness.</p>

<p>In order to improve dataset size and variation, we implemented a synthetic data generation pipeline using Autodesk Maya and allowed us generate any amount photorealistic synthetic images with high randomization and expandability. Synthetic data generation offers a solution by allowing the extraction of large amounts of images and metadata directly from a virtual environment, while maintaining precise ground truth annotations.</p>

<p>Here is some code that illustrates how we can detect multiple armor plate at once and also set up the camera angle:</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">select</span> <span class="o">-</span><span class="n">r</span> <span class="s">"ap_front"</span> <span class="s">"ap_front1"</span><span class="p">;</span>
	
	<span class="n">ConvertSelectionToVertices</span><span class="p">;</span>
	<span class="n">string</span> <span class="err">$</span><span class="n">selected</span> <span class="p">[]</span> <span class="o">=</span> <span class="err">`</span><span class="n">ls</span> <span class="o">-</span><span class="n">sl</span><span class="err">`</span><span class="p">;</span>


	
	<span class="kt">int</span> <span class="err">$</span><span class="n">numVert</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="kt">int</span> <span class="err">$</span><span class="n">sizeSelected</span> <span class="o">=</span> <span class="n">size</span><span class="p">(</span><span class="err">$</span><span class="n">selected</span><span class="p">);</span>
	<span class="n">print</span><span class="p">(</span><span class="err">$</span><span class="n">sizeSelected</span><span class="p">);</span>
  
  
  <span class="c1">// -------------------- Start Loop --------------------</span>
	<span class="k">for</span> <span class="p">(</span><span class="err">$</span><span class="n">numfile</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="err">$</span><span class="n">numfile</span><span class="o">&lt;</span><span class="err">$</span><span class="n">datasetSize</span><span class="p">;</span> <span class="o">++</span><span class="err">$</span><span class="n">numfile</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// start numfile</span>
		
		<span class="c1">// Randomize Camera attributes</span>
		<span class="err">$</span><span class="n">mode</span> <span class="o">=</span> <span class="n">rand</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">100</span><span class="p">);</span>
		<span class="k">if</span> <span class="p">(</span><span class="err">$</span><span class="n">mode</span> <span class="o">&lt;</span> <span class="mi">20</span><span class="p">)</span> <span class="p">{</span>
			<span class="err">$</span><span class="n">rotX</span> <span class="o">=</span> <span class="n">rand</span><span class="p">(</span><span class="o">-</span><span class="mi">80</span><span class="p">,</span><span class="o">-</span><span class="mi">10</span><span class="p">);</span>
		<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
			<span class="err">$</span><span class="n">rotX</span> <span class="o">=</span> <span class="n">rand</span><span class="p">(</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span>
		<span class="p">}</span>
		<span class="err">$</span><span class="n">rotY</span> <span class="o">=</span> <span class="n">rand</span><span class="p">(</span><span class="o">-</span><span class="mi">80</span><span class="p">,</span><span class="mi">80</span><span class="p">);</span>
		<span class="err">$</span><span class="n">dolly</span> <span class="o">=</span> <span class="n">rand</span><span class="p">(</span><span class="mi">104</span><span class="p">,</span><span class="mi">555</span><span class="p">);</span>
		<span class="n">print</span><span class="p">(</span><span class="s">"rotX : "</span><span class="o">+</span><span class="err">$</span><span class="n">rotX</span><span class="o">+</span><span class="s">"</span><span class="se">\n</span><span class="s">"</span><span class="o">+</span><span class="s">"rotY : "</span><span class="o">+</span><span class="err">$</span><span class="n">rotY</span><span class="o">+</span><span class="s">"</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
		
		
		<span class="c1">// Setup camera</span>
		<span class="n">viewLookAt</span> <span class="o">-</span><span class="n">pos</span> <span class="mi">0</span> <span class="mf">20.67</span> <span class="mi">20</span> <span class="err">$</span><span class="n">camera</span><span class="p">;</span>
		<span class="n">rotate</span> <span class="o">-</span><span class="n">pivot</span> <span class="mi">0</span> <span class="mf">20.67</span> <span class="mi">20</span> <span class="err">$</span><span class="n">rotX</span> <span class="err">$</span><span class="n">rotY</span> <span class="mi">0</span> <span class="err">$</span><span class="n">camera</span><span class="p">;</span>
		<span class="n">dolly</span> <span class="o">-</span><span class="n">abs</span> <span class="o">-</span><span class="n">d</span> <span class="err">$</span><span class="n">dolly</span> <span class="err">$</span><span class="n">camera</span><span class="p">;</span>
</code></pre></div></div>

<div class="text-center p-4">
  <img class="img-thumbnail" src="../img/robomaster/flowchart.png" />
</div>

<p>we have devised a 6-stage process that transforms the 3D model into a deployable computer vision model. Let me briefly walk you through each stage.</p>

<p>The first stage involves importing the 3D models of our robots and environment into Autodesk Maya. 
In the second stage, we use an extensive randomization framework to simulate different scenarios the robot might encounter.
In stage three, we render the images and extract metadata from the virtual environment.</p>

<p>These steps are then repeated multiple times to generate any amount of data we want, providing a virtually limitless supply of diverse training samples.</p>

<p>With the synthetic dataset prepared, we custom train a YOLOv5 object detection model and evaluate its performance against various real-world scenarios. This evaluation allows us to identify areas in which the model may be lacking and pinpoint specific edge cases. To address these shortcomings, we generate thousands of variations for each identified edge case, thereby strengthening the model’s performance. Through iterative improvements and fine-tuning, the model becomes increasingly robust and accurate.</p>

<div class="text-center p-4">
  <img class="img-thumbnail" src="../img/robomaster/flow.png" />
</div>

<p>After setting up the 3D model, we begin to randomize the parameters. This involves generating variations of the 3D model by altering certain parameters and attributes of the model, which helps create a diverse range of datasets that reflect real-world variation.</p>

<p>We focus on randomizing four parameters in particular: lighting, camera, 3D meshes, and post-processing.</p>

<p>For lighting, we adjust the intensity, color, location, and rotation offset. The competition lighting is very different from what we would normally be in, so doing this covers almost all of the conditions that the robot may encounter. For the camera, we adjust the field of view, focal length, as well as location and rotation offset. For this new season, our team is switching our camera, so these parameters helps the model to adapt to this change.</p>

<p>For 3D meshes, we adjust the background, armor plate, and robot variations. By changing these parameters, the model can adapts to different enemy robot types. Lastly, we use the OpenCV library for post-processing to adjust the exposure, bloom effect, white balance, and color balance after the datasets have been generated, further improving the variation of the dataset.</p>


</div>

<footer class="navbar navbar-expand navbar-light bg-light bg-gradient border-top">
  <div class="container-fluid">
    <div class="ms-auto">
      <ul class="navbar-nav mb-2 mb-lg-0">
        <small><a class="nav-link" href="https://techfolios.github.io">Made with Techfolios</a></small>
      </ul>
    </div>
  </div>
</footer>


  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2" crossorigin="anonymous"></script>
  </body>
</html>
